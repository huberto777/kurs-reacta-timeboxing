(this.webpackJsonptimeboxing=this.webpackJsonptimeboxing||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"k",(function(){return a})),n.d(t,"l",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"j",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b}));var r="TIMEBOXES_SET",i="TIMEBOX_ADD",a="TIMEBOX_REMOVE",o="TIMEBOX_REPLACE",u="SEARCH_INPUT",c="TIMEBOX_MAKE_CURRENT",s="TIMEBOX_EDIT_START",l="TIMEBOX_EDIT_STOP",d="STOP_CURRENT_TIMEBOX",m="CURRENT_TIMEBOX_FINISH",f="LOADING_INDICATOR_DISABLE",b="ERROR_SET"},16:function(e,t,n){"use strict";var r=n(9),i=n(1);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.j:var n=t.timebox;return n.id;case i.k:var a=t.removedTimebox;return e===a.id?null:e;case i.e:return Object(r.a)(Object(r.a)({},e),{},{currentTimeboxId:null});case i.a:var o=t.timebox;return Object(r.a)(Object(r.a)({},e),{},{timebox:o.finished=!0,currentTimeboxId:null});default:return e}}var o=n(28);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.f:var n=t.timeboxes;return n;case i.g:var r=t.timebox,a=[].concat(Object(o.a)(e),[r]);return a;case i.k:var u=t.removedTimebox,c=e.filter((function(e){return e.id!==u.id}));return c;case i.l:var s=t.replacedTimebox,l=e.map((function(e){return e.id===s.id?s:e}));return l;default:return e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.i:return null;case i.h:var n=t.currentlyEditedTimeboxId;return n;default:return e}}function s(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.c:return!1;default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.b:var n=t.timeboxesLoadingError;return n;default:return e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.d:var n=t.payload;return n;default:return e}}n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"i",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return E}));var m=function(e){return e.timeboxes},f=function(e){return e.timeboxesSearch?e.timeboxes.filter((function(t){return t.title.toLowerCase().includes(e.timeboxesSearch)&&!1===t.finished})):function(e){return e.filter((function(t){return t.id!==e.currentTimeboxId&&!1===t.finished}))}(e.timeboxes)},b=function(e,t){return function(e,t){return e.find((function(e){return e.id===t}))}(e.timeboxes,t)},h=function(e){return e.timeboxesAreLoading},p=function(e){return e.timeboxesLoadingError},v=function(e,t){return e.currentlyEditedTimeboxId&&e.currentlyEditedTimeboxId===t.id},g=function(e){return!!e.currentTimeboxId},I=function(e){return g(e)?b(e,e.currentTimeboxId):null},E=function(e){return e.timeboxes.filter((function(t){return!0===t.finished&&t.title.includes(e.timeboxesSearch)}))};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{currentTimeboxId:a(e.currentTimeboxId,t),timeboxes:u(e.timeboxes,t),currentlyEditedTimeboxId:c(e.currentlyEditedTimeboxId,t),timeboxesAreLoading:s(e.timeboxesAreLoading,t),timeboxesLoadingError:l(e.timeboxesLoadingError,t),timeboxesSearch:d(e.timeboxesSearch,t)}}},18:function(e,t,n){"use strict";var r=n(0),i=n.n(r).a.createContext({accessToken:null});t.a=i},22:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){setTimeout(t,e)}))}n.d(t,"a",(function(){return r}))},30:function(e,t,n){e.exports=n(42)},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(11),o=n.n(a),u=n(24),c=n(25),s=n(3),l=n(17),d=n(5),m=n(6),f=n(8),b=n(7),h=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e}return Object(m.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("Wyst\u0105pi\u0142 nast\u0119puj\u0105cy b\u0142\u0105d:",e,t)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.children;return this.state.hasError?t:n}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(i.a.Component),p=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),r.props.onLoginAttempt({email:r.emailInput.current.value,password:r.passwordInput.current.value}),r.emailInput.current.value="",r.passwordInput.current.value=""},r.emailInput=i.a.createRef(),r.passwordInput=i.a.createRef(),r}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit,className:"LoginForm"},this.props.errorMessage?i.a.createElement("div",{className:"LoginForm__error-message"},this.props.errorMessage):null,i.a.createElement("label",null,"Email",i.a.createElement("input",{ref:this.emailInput,type:"text",defaultValue:"hubert@example.com"})),i.a.createElement("br",null),i.a.createElement("label",null,"Has\u0142o",i.a.createElement("input",{ref:this.passwordInput,type:"password",defaultValue:"secret"})),i.a.createElement("br",null),i.a.createElement("button",null,"Zaloguj si\u0119"))}}]),n}(i.a.Component),v=n(18),g=n(13),I=n.n(g),E=n(21),T=n(22),x={login:function(){var e=Object(E.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)(200);case 2:if(n=t.email,r=t.password,"hubert@example.com"!==n||"secret"!==r){e.next=5;break}return e.abrupt("return",{accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Imh1YmVydEBleGFtcGxlLmNvbSIsImlhdCI6MTU5MDQwNzI0NiwiZXhwIjoxNTkwNDEwODQ2LCJzdWIiOiIyIn0.rgxTu-UEf2KylenKrTNSQbouGXnEbjhSApw2daYlLTw"});case 5:throw new Error("Invalid credentials");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=i.a.lazy((function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,300))})),y=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={accessToken:null,previousLoginAttemptFailed:!1,expiresIn:36e5},e.handleLoginAttempt=function(t){x.login(t).then((function(t){var n=t.accessToken;localStorage.setItem("accessToken",n),e.getAccessToken()})).catch((function(){e.setState({accessToken:null,previousLoginAttemptFailed:!0})}))},e.handleLogout=function(){e.setState({accessToken:localStorage.removeItem("accessToken"),previousLoginAttemptFailed:!1})},e}return Object(m.a)(n,[{key:"getAccessToken",value:function(){this.setState({accessToken:localStorage.getItem("accessToken"),previousLoginAttemptFailed:!1})}},{key:"componentDidMount",value:function(){var e=this;this.getAccessToken(),this.intID=setInterval((function(){e.handleLogout()}),this.state.expiresIn)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intID)}},{key:"isUserLoggedIn",value:function(){return!!this.state.accessToken}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(h,{message:"Co\u015b nie dzia\u0142a w ca\u0142ej aplikacji"},this.isUserLoggedIn()?i.a.createElement(v.a.Provider,{value:{accessToken:this.state.accessToken}},i.a.createElement(i.a.Suspense,{fallback:"... Loading"},i.a.createElement(O,{onLogout:this.handleLogout}))):i.a.createElement(p,{errorMessage:this.state.previousLoginAttemptFailed?"Nie uda\u0142o si\u0119 zalogowa\u0107":null,onLoginAttempt:this.handleLoginAttempt})))}}]),n}(i.a.Component),k=(n(41),n(16)),w=Object(s.createStore)(k.b,Object(c.composeWithDevTools)(Object(s.applyMiddleware)(u.a)));o.a.render(i.a.createElement(l.a,{store:w},i.a.createElement(y,null)),document.getElementById("root"))}},[[30,1,3]]]);
//# sourceMappingURL=main.b70b36dc.chunk.js.map