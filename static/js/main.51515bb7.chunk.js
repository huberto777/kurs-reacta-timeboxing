(this.webpackJsonptimeboxing=this.webpackJsonptimeboxing||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"i",(function(){return i})),n.d(t,"m",(function(){return a})),n.d(t,"n",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"l",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return p}));var r="TIMEBOXES_SET",i="TIMEBOX_ADD",a="TIMEBOX_REMOVE",o="TIMEBOX_REPLACE",u="SEARCH_INPUT",c="TIMEBOX_MAKE_CURRENT",s="TIMEBOX_EDIT_START",l="TIMEBOX_EDIT_STOP",d="STOP_CURRENT_TIMEBOX",m="CURRENT_TIMEBOX_FINISH",f="LOADING_INDICATOR_DISABLE",b="ERROR_SET",h="SET_TIMEBOX_CREATING",p="CANCEL_TIMEBOX_CREATING"},14:function(e,t,n){"use strict";var r=n(7),i=n(1);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.l:var n=t.timebox;return n.id;case i.m:var a=t.removedTimebox;return e===a.id?null:e;case i.g:return Object(r.a)(Object(r.a)({},e),{},{currentTimeboxId:null});case i.b:var o=t.timebox;return Object(r.a)(Object(r.a)({},e),{},{timebox:o.finished=!0,currentTimeboxId:null});default:return e}}var o=n(25);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.h:var n=t.timeboxes;return n;case i.i:var r=t.timebox,a=[].concat(Object(o.a)(e),[r]);return a;case i.m:var u=t.removedTimebox,c=e.filter((function(e){return e.id!==u.id}));return c;case i.n:var s=t.replacedTimebox,l=e.map((function(e){return e.id===s.id?s:e}));return l;default:return e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.k:return null;case i.j:var n=t.currentlyEditedTimeboxId;return n;default:return e}}function s(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.d:return!1;default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.c:var n=t.timeboxesLoadingError;return n;default:return e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.f:return!0;case i.a:return!1;default:return e}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.e:var n=t.payload;return n;default:return e}}n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return I})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return T})),n.d(t,"j",(function(){return x}));var f=function(e){return e.timeboxes},b=function(e){return e.timeboxesSearch?e.timeboxes.filter((function(t){return t.title.toLowerCase().includes(e.timeboxesSearch)&&!1===t.finished})):function(e){return e.filter((function(t){return t.id!==e.currentTimeboxId&&!1===t.finished}))}(e.timeboxes)},h=function(e,t){return function(e,t){return e.find((function(e){return e.id===t}))}(e.timeboxes,t)},p=function(e){return e.timeboxesAreLoading},v=function(e){return e.timeboxesLoadingError},g=function(e,t){return e.currentlyEditedTimeboxId&&e.currentlyEditedTimeboxId===t.id},I=function(e){return!!e.currentTimeboxId},E=function(e){return I(e)?h(e,e.currentTimeboxId):null},T=function(e){return e.timeboxes.filter((function(t){return!0===t.finished&&t.title.includes(e.timeboxesSearch)}))},x=function(e){return e.timeboxIsCreating};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{currentTimeboxId:a(e.currentTimeboxId,t),timeboxes:u(e.timeboxes,t),timeboxIsCreating:d(e.timeboxIsCreating,t),currentlyEditedTimeboxId:c(e.currentlyEditedTimeboxId,t),timeboxesAreLoading:s(e.timeboxesAreLoading,t),timeboxesLoadingError:l(e.timeboxesLoadingError,t),timeboxesSearch:m(e.timeboxesSearch,t)}}},16:function(e,t,n){"use strict";var r=n(0),i=n.n(r).a.createContext({accessToken:null});t.a=i},20:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){setTimeout(t,e)}))}n.d(t,"a",(function(){return r}))},28:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(9),o=n.n(a),u=n(22),c=n(23),s=n(6),l=n(15),d=n(2),m=n(3),f=n(5),b=n(4),h=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e}return Object(m.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("Wyst\u0105pi\u0142 nast\u0119puj\u0105cy b\u0142\u0105d:",e,t)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.children;return this.state.hasError?t:n}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(i.a.Component),p=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),r.props.onLoginAttempt({email:r.emailInput.current.value,password:r.passwordInput.current.value}),r.emailInput.current.value="",r.passwordInput.current.value=""},r.emailInput=i.a.createRef(),r.passwordInput=i.a.createRef(),r}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit,className:"LoginForm"},this.props.errorMessage?i.a.createElement("div",{className:"LoginForm__error-message"},this.props.errorMessage):null,i.a.createElement("label",null,"Email",i.a.createElement("input",{ref:this.emailInput,type:"text",defaultValue:"hubert@example.com"})),i.a.createElement("br",null),i.a.createElement("label",null,"Has\u0142o",i.a.createElement("input",{ref:this.passwordInput,type:"password",defaultValue:"secret"})),i.a.createElement("br",null),i.a.createElement("button",{className:"login"},i.a.createElement("i",{className:"fas fa-sign-in-alt"})))}}]),n}(i.a.Component),v=n(16),g=n(12),I=n.n(g),E=n(19),T=n(20),x={login:function(){var e=Object(E.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)(200);case 2:if(n=t.email,r=t.password,"hubert@example.com"!==n||"secret"!==r){e.next=5;break}return e.abrupt("return",{accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Imh1YmVydEBleGFtcGxlLmNvbSIsImlhdCI6MTU5MDQwNzI0NiwiZXhwIjoxNTkwNDEwODQ2LCJzdWIiOiIyIn0.rgxTu-UEf2KylenKrTNSQbouGXnEbjhSApw2daYlLTw"});case 5:throw new Error("Invalid credentials");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=i.a.lazy((function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,297))})),y=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={accessToken:null,previousLoginAttemptFailed:!1,expiresIn:36e5},e.handleLoginAttempt=function(t){x.login(t).then((function(t){var n=t.accessToken;localStorage.setItem("accessToken",n),e.getAccessToken()})).catch((function(){e.setState({accessToken:null,previousLoginAttemptFailed:!0})}))},e.handleLogout=function(){e.setState({accessToken:localStorage.removeItem("accessToken"),previousLoginAttemptFailed:!1})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getAccessToken(),this.intID=setInterval((function(){e.handleLogout()}),this.state.expiresIn)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intID)}},{key:"getAccessToken",value:function(){this.setState({accessToken:localStorage.getItem("accessToken"),previousLoginAttemptFailed:!1})}},{key:"isUserLoggedIn",value:function(){return!!this.state.accessToken}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h2",{className:"title"},"Timeboxing"),i.a.createElement(h,{message:"Co\u015b nie dzia\u0142a w ca\u0142ej aplikacji"},this.isUserLoggedIn()?i.a.createElement(v.a.Provider,{value:{accessToken:this.state.accessToken}},i.a.createElement(i.a.Suspense,{fallback:"... Loading"},i.a.createElement(O,{onLogout:this.handleLogout}))):i.a.createElement(p,{errorMessage:this.state.previousLoginAttemptFailed?"Nie uda\u0142o si\u0119 zalogowa\u0107":null,onLoginAttempt:this.handleLoginAttempt})))}}]),n}(i.a.Component),k=(n(38),n(14)),w=Object(s.createStore)(k.b,Object(c.composeWithDevTools)(Object(s.applyMiddleware)(u.a)));o.a.render(i.a.createElement(l.a,{store:w},i.a.createElement(y,null)),document.getElementById("root"))}},[[28,1,3]]]);
//# sourceMappingURL=main.51515bb7.chunk.js.map