{"version":3,"sources":["constants/types.js","reducers/currentTimeboxIdReducer.js","reducers/timeboxesReducer.js","reducers/currentlyEditedTimeboxIdReducer.js","reducers/timeboxesAreLoadingReducer.js","reducers/timeboxesLoadingErrorReducer.js","reducers/timeboxesSearchReducer.js","reducers/index.js","contexts/AuthenticationContext.js","api/wait.js","components/ErrorBoundary.js","components/LoginForm.js","api/FakeAuthenticationApi.js","components/App.js","index.js"],"names":["TIMEBOXES_SET","TIMEBOX_ADD","TIMEBOX_REMOVE","TIMEBOX_REPLACE","SEARCH_INPUT","TIMEBOX_MAKE_CURRENT","TIMEBOX_EDIT_START","TIMEBOX_EDIT_STOP","STOP_CURRENT_TIMEBOX","CURRENT_TIMEBOX_FINISH","LOADING_INDICATOR_DISABLE","ERROR_SET","currentTimeboxIdReducer","state","action","type","timebox","id","removedTimebox","currentTimeboxId","finished","timeboxesReducer","timeboxes","filter","replacedTimebox","map","currentlyEditedTimeboxIdReducer","currentlyEditedTimeboxId","timeboxesAreLoadingReducer","timeboxesLoadingErrorReducer","timeboxesLoadingError","timeboxesSearchReducer","payload","getAllTimeboxes","getRemainingTimeboxes","timeboxesSearch","title","toLowerCase","includes","timeboxesSelectors","getTimeboxById","timeboxId","find","areTimeboxesLoading","timeboxesAreLoading","getTimeboxesLoadingError","isTimeboxEdited","isAnyTimeboxCurrent","getCurrentTimebox","getFinishedTimeboxes","rootReducer","AuthenticationContext","React","createContext","accessToken","wait","ms","Promise","resolve","setTimeout","ErrorBoundary","hasError","error","info","console","log","this","props","message","children","Component","LoginForm","handleSubmit","event","preventDefault","onLoginAttempt","email","emailInput","current","value","password","passwordInput","createRef","onSubmit","className","errorMessage","ref","defaultValue","FakeAuthenticationAPI","login","credentials","a","Error","AuthenticatedApp","lazy","App","previousLoginAttemptFailed","expiresIn","handleLoginAttempt","AuthenticationAPI","then","localStorage","setItem","getAccessToken","catch","setState","handleLogout","removeItem","getItem","intID","setInterval","clearInterval","isUserLoggedIn","Provider","Suspense","fallback","onLogout","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e28ec606.chunk.js","sourcesContent":["export const TIMEBOXES_SET = \"TIMEBOXES_SET\";\r\nexport const TIMEBOX_ADD = \"TIMEBOX_ADD\";\r\nexport const TIMEBOX_REMOVE = \"TIMEBOX_REMOVE\";\r\nexport const TIMEBOX_REPLACE = \"TIMEBOX_REPLACE\";\r\nexport const SEARCH_INPUT = \"SEARCH_INPUT\";\r\nexport const TIMEBOX_MAKE_CURRENT = \"TIMEBOX_MAKE_CURRENT\";\r\nexport const TIMEBOX_EDIT_START = \"TIMEBOX_EDIT_START\";\r\nexport const TIMEBOX_EDIT_STOP = \"TIMEBOX_EDIT_STOP\";\r\nexport const STOP_CURRENT_TIMEBOX = \"STOP_CURRENT_TIMEBOX\";\r\nexport const CURRENT_TIMEBOX_FINISH = \"CURRENT_TIMEBOX_FINISH\";\r\nexport const LOADING_INDICATOR_DISABLE = \"LOADING_INDICATOR_DISABLE\";\r\nexport const ERROR_SET = \"ERROR_SET\";\r\n","import {\r\n  TIMEBOX_MAKE_CURRENT,\r\n  TIMEBOX_REMOVE,\r\n  STOP_CURRENT_TIMEBOX,\r\n  CURRENT_TIMEBOX_FINISH,\r\n} from \"../constants/types\";\r\n\r\nexport function currentTimeboxIdReducer(state = null, action) {\r\n  switch (action.type) {\r\n    case TIMEBOX_MAKE_CURRENT: {\r\n      const { timebox } = action;\r\n      return timebox.id;\r\n    }\r\n    case TIMEBOX_REMOVE: {\r\n      const { removedTimebox } = action;\r\n      return state === removedTimebox.id ? null : state;\r\n    }\r\n    case STOP_CURRENT_TIMEBOX: {\r\n      return { ...state, currentTimeboxId: null };\r\n    }\r\n    case CURRENT_TIMEBOX_FINISH: {\r\n      const { timebox } = action;\r\n      return {\r\n        ...state,\r\n        timebox: (timebox.finished = true),\r\n        currentTimeboxId: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import {\r\n  TIMEBOXES_SET,\r\n  TIMEBOX_ADD,\r\n  TIMEBOX_REMOVE,\r\n  TIMEBOX_REPLACE,\r\n} from \"../constants/types\";\r\n\r\n// const initialState = {\r\n//   timeboxes: [],\r\n// };\r\n\r\nexport default function timeboxesReducer(state = [], action) {\r\n  switch (action.type) {\r\n    case TIMEBOXES_SET: {\r\n      const { timeboxes } = action;\r\n      return timeboxes;\r\n    }\r\n    case TIMEBOX_ADD: {\r\n      const { timebox } = action;\r\n      const timeboxes = [...state, timebox];\r\n      return timeboxes;\r\n    }\r\n    case TIMEBOX_REMOVE: {\r\n      const { removedTimebox } = action;\r\n      const timeboxes = state.filter(\r\n        (timebox) => timebox.id !== removedTimebox.id\r\n      );\r\n      return timeboxes;\r\n    }\r\n    case TIMEBOX_REPLACE: {\r\n      const { replacedTimebox } = action;\r\n      const timeboxes = state.map((timebox) =>\r\n        timebox.id === replacedTimebox.id ? replacedTimebox : timebox\r\n      );\r\n      return timeboxes;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport const getAllTimeboxes = (state) => state;\r\nexport const getRemainingTimeboxes = (state) =>\r\n  state.filter(\r\n    (timebox) =>\r\n      timebox.id !== state.currentTimeboxId && timebox.finished === false\r\n  );\r\nexport const getTimeboxById = (state, timeboxId) =>\r\n  state.find((timebox) => timebox.id === timeboxId);\r\n","import { TIMEBOX_EDIT_STOP, TIMEBOX_EDIT_START } from \"../constants/types\";\r\n\r\nexport function currentlyEditedTimeboxIdReducer(state = null, action) {\r\n  switch (action.type) {\r\n    case TIMEBOX_EDIT_STOP: {\r\n      return null;\r\n    }\r\n    case TIMEBOX_EDIT_START: {\r\n      const { currentlyEditedTimeboxId } = action;\r\n      return currentlyEditedTimeboxId;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { LOADING_INDICATOR_DISABLE } from \"../constants/types\";\r\n\r\nexport function timeboxesAreLoadingReducer(state = true, action) {\r\n  switch (action.type) {\r\n    case LOADING_INDICATOR_DISABLE: {\r\n      return false;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { ERROR_SET } from \"../constants/types\";\r\n\r\nexport function timeboxesLoadingErrorReducer(state = null, action = {}) {\r\n  switch (action.type) {\r\n    case ERROR_SET: {\r\n      const { timeboxesLoadingError } = action;\r\n      return timeboxesLoadingError;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const getTimeboxesLoadingError = (state) => state;\r\n","import { SEARCH_INPUT } from \"../constants/types\";\r\n\r\n// const initialState = {\r\n//   timeboxesSearch: [],\r\n// };\r\n\r\nexport default function timeboxesSearchReducer(state = [], action) {\r\n  switch (action.type) {\r\n    case SEARCH_INPUT: {\r\n      const { payload } = action;\r\n      return payload;\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { currentTimeboxIdReducer } from \"./currentTimeboxIdReducer\";\r\nimport timeboxesReducer, * as timeboxesSelectors from \"./timeboxesReducer\";\r\nimport { currentlyEditedTimeboxIdReducer } from \"./currentlyEditedTimeboxIdReducer\";\r\nimport { timeboxesAreLoadingReducer } from \"./timeboxesAreLoadingReducer\";\r\nimport { timeboxesLoadingErrorReducer } from \"./timeboxesLoadingErrorReducer\";\r\nimport timeboxesSearchReducer from \"./timeboxesSearchReducer\";\r\n\r\nfunction rootReducer(state = {}, action) {\r\n  return {\r\n    currentTimeboxId: currentTimeboxIdReducer(state.currentTimeboxId, action),\r\n    timeboxes: timeboxesReducer(state.timeboxes, action),\r\n    currentlyEditedTimeboxId: currentlyEditedTimeboxIdReducer(\r\n      state.currentlyEditedTimeboxId,\r\n      action\r\n    ),\r\n    timeboxesAreLoading: timeboxesAreLoadingReducer(\r\n      state.timeboxesAreLoading,\r\n      action\r\n    ),\r\n    timeboxesLoadingError: timeboxesLoadingErrorReducer(\r\n      state.timeboxesLoadingError,\r\n      action\r\n    ),\r\n    timeboxesSearch: timeboxesSearchReducer(state.timeboxesSearch, action),\r\n  };\r\n}\r\n\r\n// selectors\r\nexport const getAllTimeboxes = (state) =>\r\n  timeboxesSelectors.getAllTimeboxes(state.timeboxes);\r\n\r\nexport const getRemainingTimeboxes = (state) =>\r\n  !state.timeboxesSearch\r\n    ? timeboxesSelectors.getRemainingTimeboxes(state.timeboxes)\r\n    : state.timeboxes.filter(\r\n        (timebox) =>\r\n          timebox.title.toLowerCase().includes(state.timeboxesSearch) &&\r\n          timebox.finished === false\r\n      );\r\nexport const getTimeboxById = (state, timeboxId) =>\r\n  timeboxesSelectors.getTimeboxById(state.timeboxes, timeboxId);\r\n\r\nexport const areTimeboxesLoading = (state) => state.timeboxesAreLoading;\r\nexport const getTimeboxesLoadingError = (state) => state.timeboxesLoadingError;\r\nexport const isTimeboxEdited = (state, timebox) =>\r\n  state.currentlyEditedTimeboxId &&\r\n  state.currentlyEditedTimeboxId === timebox.id;\r\nexport const getCurrentlyEditedTimebox = (state) =>\r\n  getTimeboxById(state, state.currentlyEditedTimeboxId);\r\nexport const isAnyTimeboxEdited = (state) => !!state.currentlyEditedTimeboxId;\r\nexport const isAnyTimeboxCurrent = (state) => !!state.currentTimeboxId;\r\nexport const getCurrentTimebox = (state) =>\r\n  isAnyTimeboxCurrent(state)\r\n    ? getTimeboxById(state, state.currentTimeboxId)\r\n    : null;\r\n\r\nexport const getFinishedTimeboxes = (state) =>\r\n  state.timeboxes.filter(\r\n    (timebox) =>\r\n      timebox.finished === true && timebox.title.includes(state.timeboxesSearch)\r\n  );\r\n\r\nexport default rootReducer;\r\n","import React from \"react\";\r\n\r\nconst AuthenticationContext = React.createContext({ accessToken: null });\r\n\r\nexport default AuthenticationContext;","export function wait(ms = 1000) {\r\n    return new Promise((resolve) => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    state = {\r\n        hasError: false\r\n    }\r\n    static getDerivedStateFromError(error) {\r\n        // Update state so the next render will show the fallback UI.\r\n        return { hasError: true };\r\n    }\r\n    componentDidCatch(error, info) {\r\n        // You can also log the error to an error reporting service\r\n        console.log(\"Wystąpił następujący błąd:\", error, info);\r\n    }\r\n    render() {\r\n        const { message, children } = this.props;\r\n        return this.state.hasError ? message : children;\r\n    }\r\n}\r\nErrorBoundary.propTypes = {\r\n    message: PropTypes.string.isRequired,\r\n    children: PropTypes.any.isRequired\r\n}\r\n\r\nexport default ErrorBoundary;","import React from \"react\";\r\n\r\nclass LoginForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.emailInput = React.createRef();\r\n        this.passwordInput = React.createRef();\r\n    }\r\n    handleSubmit = (event) => {\r\n        event.preventDefault(); \r\n        this.props.onLoginAttempt({ \r\n            email: this.emailInput.current.value, \r\n            password: this.passwordInput.current.value\r\n        });\r\n        this.emailInput.current.value = \"\";\r\n        this.passwordInput.current.value = \"\";\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.handleSubmit} className=\"LoginForm\">\r\n                { this.props.errorMessage ? \r\n                    <div className=\"LoginForm__error-message\">{this.props.errorMessage}</div> :\r\n                    null\r\n                }\r\n                <label>\r\n                    Email\r\n                    <input \r\n                        ref={this.emailInput}\r\n                        type=\"text\" \r\n                        defaultValue=\"hubert@example.com\"\r\n                    />\r\n                </label><br/>\r\n                <label>\r\n                    Hasło\r\n                    <input \r\n                        ref={this.passwordInput}\r\n                        type=\"password\" \r\n                        defaultValue=\"secret\"\r\n                    />\r\n                </label><br />\r\n                <button \r\n                >Zaloguj się</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginForm;","import { wait } from \"./wait\";\r\n\r\nconst FakeAuthenticationAPI = {\r\n    login: async function(credentials) {\r\n        await wait(200);\r\n        const { email, password } = credentials;\r\n        if (email === \"hubert@example.com\" && password === \"secret\") {\r\n            return {\r\n                accessToken: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Imh1YmVydEBleGFtcGxlLmNvbSIsImlhdCI6MTU5MDQwNzI0NiwiZXhwIjoxNTkwNDEwODQ2LCJzdWIiOiIyIn0.rgxTu-UEf2KylenKrTNSQbouGXnEbjhSApw2daYlLTw\"\r\n            }\r\n        }\r\n        throw new Error(\"Invalid credentials\");\r\n    }\r\n}\r\n\r\nexport default FakeAuthenticationAPI;","import React from \"react\";\r\n\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport LoginForm from \"./LoginForm\";\r\nimport AuthenticationContext from \"../contexts/AuthenticationContext\";\r\nimport AuthenticationAPI from \"../api/FakeAuthenticationApi\";\r\n\r\nconst AuthenticatedApp = React.lazy(() => import(\"./AuthenticatedApp\"));\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    accessToken: null,\r\n    previousLoginAttemptFailed: false,\r\n    expiresIn: 3600000,\r\n  };\r\n\r\n  getAccessToken() {\r\n    this.setState({\r\n      accessToken: localStorage.getItem(\"accessToken\"),\r\n      previousLoginAttemptFailed: false,\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getAccessToken();\r\n    this.intID = setInterval(() => {\r\n      this.handleLogout();\r\n    }, this.state.expiresIn);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.intID);\r\n  }\r\n\r\n  isUserLoggedIn() {\r\n    return !!this.state.accessToken;\r\n  }\r\n\r\n  handleLoginAttempt = (credentials) => {\r\n    AuthenticationAPI.login(credentials)\r\n      .then(({ accessToken }) => {\r\n        localStorage.setItem(\"accessToken\", accessToken);\r\n        this.getAccessToken();\r\n      })\r\n      .catch(() => {\r\n        this.setState({\r\n          accessToken: null,\r\n          previousLoginAttemptFailed: true,\r\n        });\r\n      });\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.setState({\r\n      accessToken: localStorage.removeItem(\"accessToken\"),\r\n      previousLoginAttemptFailed: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <h2 className=\"title\">Kurs Reacta - Timeboxing</h2>\r\n        <ErrorBoundary message=\"Coś nie działa w całej aplikacji\">\r\n          {this.isUserLoggedIn() ? (\r\n            <AuthenticationContext.Provider\r\n              value={{ accessToken: this.state.accessToken }}\r\n            >\r\n              {\r\n                <React.Suspense fallback={\"... Loading\"}>\r\n                  <AuthenticatedApp onLogout={this.handleLogout} />\r\n                </React.Suspense>\r\n              }\r\n            </AuthenticationContext.Provider>\r\n          ) : (\r\n            <LoginForm\r\n              errorMessage={\r\n                this.state.previousLoginAttemptFailed\r\n                  ? \"Nie udało się zalogować\"\r\n                  : null\r\n              }\r\n              onLoginAttempt={this.handleLoginAttempt}\r\n            />\r\n          )}\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport thunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport App from \"./components/App\";\r\nimport \"./styles/main.scss\"\r\n\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools(\r\n    applyMiddleware(thunk)\r\n));\r\n\r\nReactDOM.render(\r\n    <Provider store={ store }>\r\n        <App />\r\n    </Provider>, \r\n    document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}