(this.webpackJsonptimeboxing=this.webpackJsonptimeboxing||[]).push([[4],{177:function(e,t){},179:function(e,t){},191:function(e,t){},193:function(e,t){},221:function(e,t){},223:function(e,t){},224:function(e,t){},229:function(e,t){},231:function(e,t){},238:function(e,t){},240:function(e,t){},258:function(e,t){},261:function(e,t){},277:function(e,t){},280:function(e,t){},300:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a);var r=function(e){var t=e.children;if(t.length<1)throw new Error("Header has to have at least one child!");return i.a.createElement("header",{className:"header"},t)},o=n(298),l=n(3),c=n(4),u=n(23),s=n(6),m=n(5),d=n(18),b=n(19),f=n(20);function h(e){var t=e.className,n=e.minutes,a=e.seconds;return i.a.createElement("h2",{style:{},className:"Clock  "+t},"Pozosta\u0142o ",n,":",a)}h.defaultProps={className:""};var v=h,p=n(164),E=n.n(p);var T=function(e){var t=e.className,n=void 0===t?"":t,a=e.percent,r=void 0===a?33:a,o=e.big,l=void 0!==o&&o,c=e.color,u=void 0===c?null:c,s=E()("progress",n,{"progress--big":l,"progress--color-red":"red"===u});return i.a.createElement("div",{className:s},i.a.createElement("div",{className:"progress__bar",style:{width:"".concat(r,"%")}}))};var x=n(17),C=n(8),g=n(14),j=n.n(g),I=n(24),y=n(165),M=n.n(y),O=n(25),k=[{id:1,title:"Ucz\u0119 si\u0119 o promises",totalTimeInMinutes:25,finished:!1},{id:2,title:"Poznaj\u0119 REST API",totalTimeInMinutes:10,finished:!1},{id:3,title:"\u0106wicz\u0119 async/await",totalTimeInMinutes:15,finished:!1},{id:4,title:"Ucz\u0119 si\u0119 fetch",totalTimeInMinutes:5,finished:!1}];function N(e){var t=k.findIndex((function(t){return t.id===e}));if(t<0)throw new Error("Timebox o podanym id nie istnieje");return t}var w={getAllTimeboxes:function(){return Object(I.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(200);case 2:return e.abrupt("return",[].concat(k));case 3:case"end":return e.stop()}}),e)})))()},addTimebox:function(e){return Object(I.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:return n=Object(C.a)(Object(C.a)({},e),{},{id:M.a.v4()}),k.push(n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},replaceTimebox:function(e){return Object(I.a)(j.a.mark((function t(){var n,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("Cannot replace timebox without an id.");case 4:return n=N(e.id),a=Object(C.a)({},e),k[n]=a,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))()},removeTimebox:function(e){return Object(I.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("Cannot remove timebox without an id.");case 4:n=N(e.id),k.splice(n,1);case 6:case"end":return t.stop()}}),t)})))()}},S=n(2),F=function(){return{type:S.k}},B=function(){return{type:S.a}},P=function(e){return function(t){w.getAllTimeboxes(e).then((function(e){return t(function(e){return{type:S.h,timeboxes:e}}(e))})).catch((function(e){return t(function(e){return{type:S.c,error:e}}(e))})).finally((function(){return t({type:S.d})}))}},q=function(e,t){return function(n){w.removeTimebox(e,t).then((function(){return n((t=e,{type:S.m,removedTimebox:t}));var t}))}},z=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={isRunning:!1,isPaused:!1,isFinished:!1,pausesCount:0,elapsedTimeInSeconds:0},a.handleStart=a.handleStart.bind(Object(u.a)(a)),a.handleStop=a.handleStop.bind(Object(u.a)(a)),a.togglePause=a.togglePause.bind(Object(u.a)(a)),a.intervalId=null,a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e,t){!t.isFinished&&this.state.isFinished&&this.props.onFinish()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"handleStart",value:function(){this.setState({isRunning:!0}),this.startTimer()}},{key:"handleStop",value:function(){this.setState({isRunning:!1,isPaused:!1,pausesCount:0,elapsedTimeInSeconds:0}),this.stopTimer()}},{key:"startTimer",value:function(){var e=this;null===this.intervalId&&(this.intervalId=window.setInterval((function(){e.setState((function(t){var n=60*e.props.totalTimeInMinutes,a=Math.min(t.elapsedTimeInSeconds+.1,n),i=t.isFinished||a>=n;return i&&e.stopTimer(),{elapsedTimeInSeconds:a,isFinished:i,isRunning:t.isRunning&&!i,isPaused:t.isPaused&&!i}}))}),100))}},{key:"stopTimer",value:function(){window.clearInterval(this.intervalId),this.intervalId=null}},{key:"togglePause",value:function(){var e=this;this.setState((function(t){var n=!t.isPaused;return n?e.stopTimer():e.startTimer(),{isPaused:n,pausesCount:n?t.pausesCount+1:t.pausesCount}}))}},{key:"render",value:function(){var e,t=this.state,n=t.isFinished,a=t.isPaused,r=t.isRunning,l=t.pausesCount,c=t.elapsedTimeInSeconds,u=this.props,s=u.title,m=u.totalTimeInMinutes,d=u.onCancel,h=60*m,p=(e=h-c,[Math.floor(e/60),Math.floor(e%60)]),E=Object(o.a)(p,2),x=E[0],C=E[1],g=c/h*100;return i.a.createElement("div",{className:"CurrentTimebox"},i.a.createElement("h1",null,s),i.a.createElement(v,{minutes:x,seconds:C,className:a?"inactive":""}),i.a.createElement(T,{percent:g,className:a?"inactive":"",color:"red",big:!0}),i.a.createElement("button",{className:r||n?"inactive":"startButton",onClick:this.handleStart,disabled:r||n},i.a.createElement(b.a,{icon:f.e})),i.a.createElement("button",{className:r?"stopButton":"inactive",onClick:this.handleStop,disabled:!r},i.a.createElement(b.a,{icon:f.i})),i.a.createElement("button",{className:r?"pauseButton":"inactive",onClick:this.togglePause,disabled:!r},a?i.a.createElement(b.a,{icon:f.f}):i.a.createElement(b.a,{icon:f.c})),"Liczba przerw: ",l,i.a.createElement("button",{className:"resetButton",onClick:d},i.a.createElement(b.a,{icon:f.k})))}}]),n}(i.a.Component);var R=Object(d.b)((function(e){return{currentTimebox:Object(x.d)(e)}}),(function(e){return{onFinish:function(){return e((function(e,t){Object(x.h)(t())&&e({type:S.b,timebox:Object(x.d)(t())})}))},onCancel:function(){return e({type:S.g})}}}))((function(e){var t=e.currentTimebox,n=e.onFinish,a=e.onCancel;if(t){var r=t.title,o=t.totalTimeInMinutes;return i.a.createElement(z,{title:r,totalTimeInMinutes:o,onFinish:n,onCancel:a})}return null})),U=n(11),D=n.n(U),L=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).container=document.createElement("div"),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.container)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.container)}},{key:"render",value:function(){return D.a.createPortal(this.props.children,this.container)}}]),n}(i.a.Component),A=n(163),_=function(e){var t={};return e.title?e.title.length<3&&(t.title="Must be 3 characters or less"):t.title="Required",e.totalTimeInMinutes?e.totalTimeInMinutes<=0&&(t.totalTimeInMinutes="Must be greater than 0"):t.totalTimeInMinutes="Required",t},J=function(e){var t=e.onCreate,n=e.onClose,a=Object(A.a)({initialValues:{title:"",totalTimeInMinutes:"",finished:!1},validate:_,onSubmit:function(e,n){var a=n.resetForm;t(e),a()}});return i.a.createElement("form",{onSubmit:a.handleSubmit,className:"TimeboxCreator"},i.a.createElement("label",{htmlFor:"title"},"Co robisz ?",i.a.createElement("input",{id:"title",name:"title",type:"text",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.title})),a.touched.title&&a.errors.title?i.a.createElement("div",{className:"error"},a.errors.title):null,i.a.createElement("br",null),i.a.createElement("label",{htmlFor:"totalTimeInMinutes"},"Ile minut ?",i.a.createElement("input",{id:"totalTimeInMinutes",name:"totalTimeInMinutes",type:"number",step:"0.1",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.totalTimeInMinutes})),a.touched.totalTimeInMinutes&&a.errors.totalTimeInMinutes?i.a.createElement("div",{className:"error"},a.errors.totalTimeInMinutes):null,i.a.createElement("br",null),i.a.createElement("button",{className:"saveButton",type:"submit"},i.a.createElement(b.a,{icon:f.g})),i.a.createElement("button",{className:"cancelButton",onClick:n},i.a.createElement(b.a,{icon:f.k})))};var W=function(e){var t=e.onClose,n=e.children,a=e.onCreate;return i.a.createElement(L,null,i.a.createElement("div",{className:"modal"},i.a.createElement("div",{style:{backgroundColor:"orangered",padding:40}},n,i.a.createElement("h2",{className:"title"},"Dodanie timeboxa"),i.a.createElement(J,{onCreate:a,onClose:t}))))},V=n(21);var H=Object(d.b)((function(e){return{timeboxes:Object(x.e)(e)}}))((function(e){var t=e.timeboxes;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=e.id,n=e.title,a=e.totalTimeInMinutes;return i.a.createElement("div",{className:"TimeboxFinished",key:t},i.a.createElement("h3",null,n," - ",a," min."))})))}));function Q(e){var t=e.timeboxes,n=e.renderTimebox;return i.a.createElement("div",{className:"TimeboxesList"},t.map(n))}Object(d.b)((function(e){return{timeboxes:Object(x.c)(e)}}))(Q);var G=Object(d.b)((function(e){return{timeboxes:Object(x.f)(e)}}))(Q);var K=Object(d.b)((function(e){return{currentTimebox:Object(x.d)(e)}}))((function(e){var t=e.title,n=e.totalTimeInMinutes,a=e.onDelete,r=e.onEdit,o=e.onMakeCurrent,l=e.currentTimebox;return i.a.createElement("div",{className:"Timebox"},i.a.createElement("h3",null,t," - ",n," min."),i.a.createElement("button",{className:l?"inactive":"delButton",disabled:l,onClick:a},i.a.createElement(b.a,{icon:f.j})),i.a.createElement("button",{className:l?"inactive":"editButton",disabled:l,onClick:r},i.a.createElement(b.a,{icon:f.a})),i.a.createElement("button",{className:"startButton",onClick:o},i.a.createElement(b.a,{icon:f.b})))})),X=function(e){var t={};return e.title?e.title.length<3&&(t.title="Must have  min 3 characters"):t.title="Required",e.totalTimeInMinutes?e.totalTimeInMinutes<=0&&(t.totalTimeInMinutes="Must be more than 0"):t.totalTimeInMinutes="Required",t},Y=function(e){var t=e.initialTitle,n=e.initialTotalTimeInMinutes,a=e.onCancel,r=e.onUpdate,o=Object(A.a)({initialValues:{title:t,totalTimeInMinutes:n},validate:X,onSubmit:function(e){r(e)}});return i.a.createElement("form",{onSubmit:o.handleSubmit,className:"TimeboxEditor"},i.a.createElement("label",{htmlFor:"title"},"Co robisz ?",i.a.createElement("input",{id:"title",name:"title",type:"text",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.title})),o.errors.title?i.a.createElement("div",{className:"error"},o.errors.title):null,i.a.createElement("br",null),i.a.createElement("label",{htmlFor:"totalTimeInMinutes"},"Ile minut ?",i.a.createElement("input",{id:"totalTimeInMinutes",name:"totalTimeInMinutes",type:"number",step:"0.1",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.totalTimeInMinutes})),o.errors.totalTimeInMinutes?i.a.createElement("div",{className:"error"},o.errors.totalTimeInMinutes):null,i.a.createElement("br",null),i.a.createElement("button",{className:"cancelButton",onClick:a},i.a.createElement(b.a,{icon:f.k})),i.a.createElement("button",{className:"updateButton",type:"submit"},i.a.createElement(b.a,{icon:f.d})))},Z=Object(d.b)((function(e,t){return{isEdited:Object(x.i)(e,t.timebox)}}),(function(e,t){return{onEdit:function(){return e((n=t.timebox.id,{type:S.j,currentlyEditedTimeboxId:n}));var n},onCancel:function(){return e(F())},onMakeCurrent:function(){return e((n=t.timebox,{type:S.l,timebox:n}));var n}}}))((function(e){var t=e.timebox,n=e.isEdited,a=e.onEdit,r=e.onCancel,o=e.onUpdate,l=e.onDelete,c=e.onMakeCurrent;return i.a.createElement(i.a.Fragment,null,n?i.a.createElement(Y,{initialTitle:t.title,initialTotalTimeInMinutes:t.totalTimeInMinutes,onCancel:r,onUpdate:o}):i.a.createElement(K,{key:t.id,title:t.title,totalTimeInMinutes:t.totalTimeInMinutes,onDelete:l,onEdit:a,onMakeCurrent:c}))}));var $=function(e){var t=e.search;return i.a.createElement("div",{className:"TimeboxSearch"},i.a.createElement("input",{type:"text",placeholder:"search timeboxes",onChange:t}))};var ee=function(){var e=Object(d.c)(),t=Object(a.useContext)(V.a).accessToken,n=Object(d.d)(x.a),r=Object(d.d)(x.g),o=Object(d.d)(x.j);return Object(a.useEffect)((function(){return e(P(t)),function(){}}),[t,e]),i.a.createElement(i.a.Fragment,null,i.a.createElement($,{search:function(t){return e(function(e){return{type:S.e,payload:e.target.value.toLowerCase()}}(t))}}),o?i.a.createElement(W,{onClose:function(){return e(B())},onCreate:function(n){try{w.addTimebox(n,t).then((function(t){return e((n=t,{type:S.i,timebox:n}));var n}),e(B()))}catch(a){console.log("Jest b\u0142\u0105d przy tworzeniu timeboxa:",a)}}}):i.a.createElement("button",{className:"addButton",onClick:function(){return e({type:S.f})}},"+"),n?"Timeboxy si\u0119 \u0142aduj\u0105...":null,r?"Nie uda\u0142o si\u0119 za\u0142adowa\u0107 :(":null,i.a.createElement(G,{renderTimebox:function(n){return i.a.createElement(Z,{key:n.id,timebox:n,onUpdate:function(a){var i=Object(C.a)(Object(C.a)({},n),a);w.replaceTimebox(i,t).then((function(t){return e(function(e){return{type:S.n,replacedTimebox:e}}(t))})),e(F())},onDelete:function(){return e(q(n,t))}})}}),i.a.createElement(H,null))},te=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={quote:null},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;n.e(5).then(n.t.bind(null,299,7)).then((function(t){e.setState({quote:t.getQuote()})})).catch((function(){return console.log("Couldn't load quotes")}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.quote?i.a.createElement("figure",{className:"quote"},i.a.createElement("blockquote",null,this.state.quote.text),i.a.createElement("figcaption",null,i.a.createElement("cite",null,this.state.quote.author))):"...")}}]),a}(i.a.Component),ne=n(173),ae=n.n(ne);var ie=function(e){var t=e.onLogout;return i.a.createElement(V.a.Consumer,null,(function(e){var n=e.accessToken;return i.a.createElement(i.a.Fragment,null,"Witaj ",function(e){return ae.a.decode(e).email}(n)," /"," ",i.a.createElement("a",{href:"#",className:"header__logout-link",onClick:t},"wyloguj si\u0119"))}))};t.default=function(e){var t=e.onLogout;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r,null,i.a.createElement(ie,{onLogout:t})),i.a.createElement(ee,null),i.a.createElement(R,null),i.a.createElement(te,null))}}}]);
//# sourceMappingURL=4.c6119994.chunk.js.map