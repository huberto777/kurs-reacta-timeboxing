(this.webpackJsonptimeboxing=this.webpackJsonptimeboxing||[]).push([[4],{176:function(e,t){},178:function(e,t){},191:function(e,t){},193:function(e,t){},221:function(e,t){},223:function(e,t){},224:function(e,t){},229:function(e,t){},231:function(e,t){},238:function(e,t){},240:function(e,t){},258:function(e,t){},261:function(e,t){},277:function(e,t){},280:function(e,t){},300:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a);var r=function(e){var t=e.children;if(t.length<1)throw new Error("Header has to have at least one child!");return i.a.createElement("header",{className:"header"},t)},o=n(298),u=n(4),l=n(5),c=n(20),s=n(7),m=n(6);function d(e){var t=e.className,n=e.minutes,a=e.seconds;return i.a.createElement("h2",{style:{},className:"Clock  "+t},"Pozosta\u0142o ",n,":",a)}d.defaultProps={className:""};var b=d,f=n(163),h=n.n(f);var p=function(e){var t=e.className,n=void 0===t?"":t,a=e.percent,r=void 0===a?33:a,o=e.big,u=void 0!==o&&o,l=e.color,c=void 0===l?null:l,s=h()("progress",n,{"progress--big":u,"progress--color-red":"red"===c});return i.a.createElement("div",{className:s},i.a.createElement("div",{className:"progress__bar",style:{width:"".concat(r,"%")}}))};var v=n(16),E=n(9),T=n(13),x=n.n(T),C=n(21),j=n(164),g=n.n(j),y=n(22),I=[{id:1,title:"Ucz\u0119 si\u0119 o promises",totalTimeInMinutes:25,finished:!1},{id:2,title:"Poznaj\u0119 REST API",totalTimeInMinutes:10,finished:!1},{id:3,title:"\u0106wicz\u0119 async/await",totalTimeInMinutes:15,finished:!1},{id:4,title:"Ucz\u0119 si\u0119 fetch",totalTimeInMinutes:5,finished:!1}];function M(e){var t=I.findIndex((function(t){return t.id===e}));if(t<0)throw new Error("Timebox o podanym id nie istnieje");return t}var O={getAllTimeboxes:function(){var e=Object(C.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(200);case 2:return e.abrupt("return",[].concat(I));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addTimebox:function(){var e=Object(C.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(200);case 2:return n=Object(E.a)(Object(E.a)({},t),{},{id:g.a.v4()}),I.push(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),replaceTimebox:function(){var e=Object(C.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(200);case 2:if(t.id){e.next=4;break}throw new Error("Cannot replace timebox without an id.");case 4:return n=M(t.id),a=Object(E.a)({},t),I[n]=a,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeTimebox:function(){var e=Object(C.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(200);case 2:if(t.id){e.next=4;break}throw new Error("Cannot remove timebox without an id.");case 4:n=M(t.id),I.splice(n,1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=n(1),w=function(){return{type:k.k}},S=function(){return{type:k.a}},N=function(e){return function(t){O.getAllTimeboxes(e).then((function(e){return t(function(e){return{type:k.h,timeboxes:e}}(e))})).catch((function(e){return t(function(e){return{type:k.c,error:e}}(e))})).finally((function(){return t({type:k.d})}))}},F=function(e,t){return function(n){O.removeTimebox(e,t).then((function(){return n((t=e,{type:k.m,removedTimebox:t}));var t}))}},z=n(17),P=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isRunning:!1,isPaused:!1,isFinished:!1,pausesCount:0,elapsedTimeInSeconds:0},a.handleStart=a.handleStart.bind(Object(c.a)(a)),a.handleStop=a.handleStop.bind(Object(c.a)(a)),a.togglePause=a.togglePause.bind(Object(c.a)(a)),a.intervalId=null,a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){!t.isFinished&&this.state.isFinished&&this.props.onFinish()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"handleStart",value:function(e){this.setState({isRunning:!0}),this.startTimer()}},{key:"handleStop",value:function(e){this.setState({isRunning:!1,isPaused:!1,pausesCount:0,elapsedTimeInSeconds:0}),this.stopTimer()}},{key:"startTimer",value:function(){var e=this;null===this.intervalId&&(this.intervalId=window.setInterval((function(){e.setState((function(t){var n=60*e.props.totalTimeInMinutes,a=Math.min(t.elapsedTimeInSeconds+.1,n),i=t.isFinished||a>=n;return i&&e.stopTimer(),{elapsedTimeInSeconds:a,isFinished:i,isRunning:t.isRunning&&!i,isPaused:t.isPaused&&!i}}))}),100))}},{key:"stopTimer",value:function(){window.clearInterval(this.intervalId),this.intervalId=null}},{key:"togglePause",value:function(){this.setState((function(e){var t=!e.isPaused;return t?this.stopTimer():this.startTimer(),{isPaused:t,pausesCount:t?e.pausesCount+1:e.pausesCount}}))}},{key:"render",value:function(){var e,t=this.state,n=t.isFinished,a=t.isPaused,r=t.isRunning,u=t.pausesCount,l=t.elapsedTimeInSeconds,c=this.props,s=c.title,m=c.totalTimeInMinutes,d=c.onCancel,f=60*m,h=(e=f-l,[Math.floor(e/60),Math.floor(e%60)]),v=Object(o.a)(h,2),E=v[0],T=v[1],x=l/f*100;return i.a.createElement("div",{className:"CurrentTimebox"},i.a.createElement("h1",null,s),i.a.createElement(b,{minutes:E,seconds:T,className:a?"inactive":""}),i.a.createElement(p,{percent:x,className:a?"inactive":"",color:"red",big:!0}),i.a.createElement("button",{onClick:this.handleStart,disabled:r||n},"Start"),i.a.createElement("button",{onClick:this.handleStop,disabled:!r},"Stop"),i.a.createElement("button",{onClick:this.togglePause,disabled:!r},a?"Wzn\xf3w":"Pauzuj"),"Liczba przerw: ",u,i.a.createElement("button",{onClick:d},"reset"))}}]),n}(i.a.Component);var q=Object(z.b)((function(e){return{currentTimebox:Object(v.d)(e)}}),(function(e,t){return{onFinish:function(){return e((function(e,t){Object(v.h)(t())&&e({type:k.b,timebox:Object(v.d)(t())})}))},onCancel:function(){return e({type:k.g})}}}))((function(e){var t=e.currentTimebox,n=e.onFinish,a=e.onCancel;if(t){var r=t.title,o=t.totalTimeInMinutes;return i.a.createElement(P,{title:r,totalTimeInMinutes:o,onFinish:n,onCancel:a})}return null})),R=n(162),U=function(e){var t={};return e.title?e.title.length<3&&(t.title="Must be 3 characters or less"):t.title="Required",e.totalTimeInMinutes?e.totalTimeInMinutes<=0&&(t.totalTimeInMinutes="Must be greater than 0"):t.totalTimeInMinutes="Required",t},B=function(e){var t=e.onCreate,n=e.onClose,a=Object(R.a)({initialValues:{title:"",totalTimeInMinutes:"",finished:!1},validate:U,onSubmit:function(e,n){var a=n.resetForm;t(e),a()}});return i.a.createElement("form",{onSubmit:a.handleSubmit,className:"TimeboxCreator"},i.a.createElement("label",{htmlFor:"title"},"Co robisz ?",i.a.createElement("input",{id:"title",name:"title",type:"text",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.title})),a.touched.title&&a.errors.title?i.a.createElement("div",{className:"error"},a.errors.title):null,i.a.createElement("br",null),i.a.createElement("label",{htmlFor:"totalTimeInMinutes"},"Ile minut ?",i.a.createElement("input",{id:"totalTimeInMinutes",name:"totalTimeInMinutes",type:"number",step:"0.1",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.totalTimeInMinutes})),a.touched.totalTimeInMinutes&&a.errors.totalTimeInMinutes?i.a.createElement("div",{className:"error"},a.errors.totalTimeInMinutes):null,i.a.createElement("br",null),i.a.createElement("button",{type:"submit"},"Zapisz"),i.a.createElement("button",{onClick:n},"Anuluj"))},D=n(11),A=n.n(D),L=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).container=document.createElement("div"),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.container)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.container)}},{key:"render",value:function(){return A.a.createPortal(this.props.children,this.container)}}]),n}(i.a.Component);var W=function(e){var t=e.onClose,n=e.children,a=e.onCreate;return i.a.createElement(L,null,i.a.createElement("div",{className:"modal"},i.a.createElement("div",{style:{backgroundColor:"maroon",padding:40}},n,i.a.createElement("h2",{className:"title"},"Dodanie timeboxa"),i.a.createElement(B,{onCreate:a,onClose:t}))))},_=n(18);var J=Object(z.b)((function(e){return{timeboxes:Object(v.e)(e)}}))((function(e){var t=e.timeboxes;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=e.id,n=e.title,a=e.totalTimeInMinutes;return i.a.createElement("div",{className:"TimeboxFinished",key:t},i.a.createElement("h3",null,n," - ",a," min."))})))}));function Z(e){var t=e.timeboxes,n=e.renderTimebox;return i.a.createElement("div",{className:"TimeboxesList"},t.map(n))}Object(z.b)((function(e){return{timeboxes:Object(v.c)(e)}}))(Z);var V=Object(z.b)((function(e){return{timeboxes:Object(v.f)(e)}}))(Z);var H=Object(z.b)((function(e){return{currentTimebox:Object(v.d)(e)}}))((function(e){var t=e.title,n=e.totalTimeInMinutes,a=e.onDelete,r=e.onEdit,o=e.onMakeCurrent,u=e.currentTimebox;return i.a.createElement("div",{className:"Timebox"},i.a.createElement("h3",null,t," - ",n," min."),i.a.createElement("button",{disabled:u,onClick:a},"Usu\u0144"),i.a.createElement("button",{disabled:u,onClick:r},"Zmie\u0144"),i.a.createElement("button",{onClick:o},"Zacznij teraz"))})),Q=function(e){var t={};return e.title?e.title.length<3&&(t.title="Must have  min 3 characters"):t.title="Required",e.totalTimeInMinutes?e.totalTimeInMinutes<=0&&(t.totalTimeInMinutes="Must be more than 0"):t.totalTimeInMinutes="Required",t},G=function(e){var t=e.initialTitle,n=e.initialTotalTimeInMinutes,a=e.onCancel,r=e.onUpdate,o=Object(R.a)({initialValues:{title:t,totalTimeInMinutes:n},validate:Q,onSubmit:function(e){r(e)}});return i.a.createElement("form",{onSubmit:o.handleSubmit,className:"TimeboxEditor"},i.a.createElement("label",{htmlFor:"title"},"Co robisz ?",i.a.createElement("input",{id:"title",name:"title",type:"text",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.title})),o.errors.title?i.a.createElement("div",{className:"error"},o.errors.title):null,i.a.createElement("br",null),i.a.createElement("label",{htmlFor:"totalTimeInMinutes"},"Ile minut ?",i.a.createElement("input",{id:"totalTimeInMinutes",name:"totalTimeInMinutes",type:"number",step:"0.1",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.totalTimeInMinutes})),o.errors.totalTimeInMinutes?i.a.createElement("div",{className:"error"},o.errors.totalTimeInMinutes):null,i.a.createElement("br",null),i.a.createElement("button",{onClick:a},"Anuluj"),i.a.createElement("button",{type:"submit"},"Submit"))},K=Object(z.b)((function(e,t){return{isEdited:Object(v.i)(e,t.timebox)}}),(function(e,t){return{onEdit:function(){return e((n=t.timebox.id,{type:k.j,currentlyEditedTimeboxId:n}));var n},onCancel:function(){return e(w())},onMakeCurrent:function(){return e((n=t.timebox,{type:k.l,timebox:n}));var n}}}))((function(e){var t=e.timebox,n=e.isEdited,a=e.onEdit,r=e.onCancel,o=e.onUpdate,u=e.onDelete,l=e.onMakeCurrent;return i.a.createElement(i.a.Fragment,null,n?i.a.createElement(G,{initialTitle:t.title,initialTotalTimeInMinutes:t.totalTimeInMinutes,onCancel:r,onUpdate:o}):i.a.createElement(H,{key:t.id,title:t.title,totalTimeInMinutes:t.totalTimeInMinutes,onDelete:u,onEdit:a,onMakeCurrent:l}))}));var X=function(e){var t=e.search;return i.a.createElement("div",{className:"TimeboxSearch"},i.a.createElement("input",{type:"text",placeholder:"search timeboxes",onChange:t}))};var Y=function(){var e=Object(z.c)(),t=Object(a.useContext)(_.a).accessToken,n=Object(z.d)(v.a),r=Object(z.d)(v.g),o=Object(z.d)(v.j);return Object(a.useEffect)((function(){e(N(t))}),[t,e]),i.a.createElement(i.a.Fragment,null,i.a.createElement(X,{search:function(t){return e(function(e){return{type:k.e,payload:e.target.value.toLowerCase()}}(t))}}),o?i.a.createElement(W,{onClose:function(){return e(S())},onCreate:function(n){try{O.addTimebox(n,t).then((function(t){return e((n=t,{type:k.i,timebox:n}));var n}),e(S()))}catch(a){console.log("Jest b\u0142\u0105d przy tworzeniu timeboxa:",a)}}}):i.a.createElement("button",{className:"addButton",onClick:function(){return e({type:k.f})}},"+"),n?"Timeboxy si\u0119 \u0142aduj\u0105...":null,r?"Nie uda\u0142o si\u0119 za\u0142adowa\u0107 :(":null,i.a.createElement(V,{renderTimebox:function(n){return i.a.createElement(K,{key:n.id,timebox:n,onUpdate:function(a){var i=Object(E.a)(Object(E.a)({},n),a);O.replaceTimebox(i,t).then((function(t){return e(function(e){return{type:k.n,replacedTimebox:e}}(t))})),e(w())},onDelete:function(){return e(F(n,t))}})}}),i.a.createElement(J,null))},$=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={quote:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;n.e(5).then(n.t.bind(null,299,7)).then((function(t){e.setState({quote:t.getQuote()})})).catch((function(){return console.log("Couldn't load quotes")}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.quote?i.a.createElement("figure",{className:"quote"},i.a.createElement("blockquote",null,this.state.quote.text),i.a.createElement("figcaption",null,i.a.createElement("cite",null,this.state.quote.author))):"...")}}]),a}(i.a.Component),ee=n(172),te=n.n(ee);var ne=function(e){var t=e.onLogout;return i.a.createElement(_.a.Consumer,null,(function(e){var n=e.accessToken;return i.a.createElement(i.a.Fragment,null,"Witaj ",function(e){return te.a.decode(e).email}(n)," /"," ",i.a.createElement("a",{href:"#",className:"header__logout-link",onClick:t},"wyloguj si\u0119"))}))};t.default=function(e){var t=e.onLogout;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r,null,i.a.createElement(ne,{onLogout:t})),i.a.createElement(Y,null),i.a.createElement(q,null),i.a.createElement($,null))}}}]);
//# sourceMappingURL=4.c2de9349.chunk.js.map