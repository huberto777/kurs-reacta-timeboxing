{"version":3,"sources":["constants/types.js","reducers/currentTimeboxIdReducer.js","reducers/timeboxesReducer.js","reducers/currentlyEditedTimeboxIdReducer.js","reducers/timeboxesAreLoadingReducer.js","reducers/timeboxesLoadingErrorReducer.js","reducers/timeboxIsCreatingReducer.js","reducers/timeboxesSearchReducer.js","reducers/index.js","contexts/AuthenticationContext.js","api/wait.js","components/ErrorBoundary.js","components/LoginForm.js","api/FakeAuthenticationApi.js","components/App.js","index.js"],"names":["TIMEBOXES_SET","TIMEBOX_ADD","TIMEBOX_REMOVE","TIMEBOX_REPLACE","SEARCH_INPUT","TIMEBOX_MAKE_CURRENT","TIMEBOX_EDIT_START","TIMEBOX_EDIT_STOP","STOP_CURRENT_TIMEBOX","CURRENT_TIMEBOX_FINISH","LOADING_INDICATOR_DISABLE","ERROR_SET","SET_TIMEBOX_CREATING","CANCEL_TIMEBOX_CREATING","currentTimeboxIdReducer","state","action","type","timebox","id","removedTimebox","currentTimeboxId","finished","timeboxesReducer","timeboxes","filter","replacedTimebox","map","currentlyEditedTimeboxIdReducer","currentlyEditedTimeboxId","timeboxesAreLoadingReducer","timeboxesLoadingErrorReducer","timeboxesLoadingError","timeboxIsCreatingReducer","timeboxesSearchReducer","payload","getAllTimeboxes","getRemainingTimeboxes","timeboxesSearch","title","toLowerCase","includes","timeboxesSelectors","getTimeboxById","timeboxId","find","areTimeboxesLoading","timeboxesAreLoading","getTimeboxesLoadingError","isTimeboxEdited","isAnyTimeboxCurrent","getCurrentTimebox","getFinishedTimeboxes","timeboxIsCreating","rootReducer","AuthenticationContext","React","createContext","accessToken","wait","ms","Promise","resolve","setTimeout","ErrorBoundary","hasError","error","info","console","log","this","props","message","children","Component","LoginForm","handleSubmit","event","preventDefault","onLoginAttempt","email","emailInput","current","value","password","passwordInput","createRef","onSubmit","className","errorMessage","ref","defaultValue","FakeAuthenticationAPI","login","credentials","a","Error","AuthenticatedApp","lazy","App","previousLoginAttemptFailed","expiresIn","handleLoginAttempt","AuthenticationAPI","then","localStorage","setItem","getAccessToken","catch","setState","handleLogout","removeItem","intID","setInterval","clearInterval","getItem","isUserLoggedIn","Provider","Suspense","fallback","onLogout","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.51515bb7.chunk.js","sourcesContent":["export const TIMEBOXES_SET = 'TIMEBOXES_SET';\nexport const TIMEBOX_ADD = 'TIMEBOX_ADD';\nexport const TIMEBOX_REMOVE = 'TIMEBOX_REMOVE';\nexport const TIMEBOX_REPLACE = 'TIMEBOX_REPLACE';\nexport const SEARCH_INPUT = 'SEARCH_INPUT';\nexport const TIMEBOX_MAKE_CURRENT = 'TIMEBOX_MAKE_CURRENT';\nexport const TIMEBOX_EDIT_START = 'TIMEBOX_EDIT_START';\nexport const TIMEBOX_EDIT_STOP = 'TIMEBOX_EDIT_STOP';\nexport const STOP_CURRENT_TIMEBOX = 'STOP_CURRENT_TIMEBOX';\nexport const CURRENT_TIMEBOX_FINISH = 'CURRENT_TIMEBOX_FINISH';\nexport const LOADING_INDICATOR_DISABLE = 'LOADING_INDICATOR_DISABLE';\nexport const ERROR_SET = 'ERROR_SET';\nexport const SET_TIMEBOX_CREATING = 'SET_TIMEBOX_CREATING';\nexport const CANCEL_TIMEBOX_CREATING = 'CANCEL_TIMEBOX_CREATING';\n","import {\r\n  TIMEBOX_MAKE_CURRENT,\r\n  TIMEBOX_REMOVE,\r\n  STOP_CURRENT_TIMEBOX,\r\n  CURRENT_TIMEBOX_FINISH,\r\n} from \"../constants/types\";\r\n\r\nexport function currentTimeboxIdReducer(state = null, action) {\r\n  switch (action.type) {\r\n    case TIMEBOX_MAKE_CURRENT: {\r\n      const { timebox } = action;\r\n      return timebox.id;\r\n    }\r\n    case TIMEBOX_REMOVE: {\r\n      const { removedTimebox } = action;\r\n      return state === removedTimebox.id ? null : state;\r\n    }\r\n    case STOP_CURRENT_TIMEBOX: {\r\n      return { ...state, currentTimeboxId: null };\r\n    }\r\n    case CURRENT_TIMEBOX_FINISH: {\r\n      const { timebox } = action;\r\n      return {\r\n        ...state,\r\n        timebox: (timebox.finished = true),\r\n        currentTimeboxId: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { TIMEBOXES_SET, TIMEBOX_ADD, TIMEBOX_REMOVE, TIMEBOX_REPLACE } from '../constants/types';\n\n// const initialState = {\n//   timeboxes: [],\n// };\n\nexport default function timeboxesReducer(state = [], action) {\n  switch (action.type) {\n    case TIMEBOXES_SET: {\n      const { timeboxes } = action;\n      return timeboxes;\n    }\n    case TIMEBOX_ADD: {\n      const { timebox } = action;\n      const timeboxes = [...state, timebox];\n      return timeboxes;\n    }\n    case TIMEBOX_REMOVE: {\n      const { removedTimebox } = action;\n      const timeboxes = state.filter((timebox) => timebox.id !== removedTimebox.id);\n      return timeboxes;\n    }\n    case TIMEBOX_REPLACE: {\n      const { replacedTimebox } = action;\n      const timeboxes = state.map((timebox) =>\n        timebox.id === replacedTimebox.id ? replacedTimebox : timebox,\n      );\n      return timeboxes;\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n\nexport const getAllTimeboxes = (state) => state;\nexport const getRemainingTimeboxes = (state) =>\n  state.filter((timebox) => timebox.id !== state.currentTimeboxId && timebox.finished === false);\nexport const getTimeboxById = (state, timeboxId) =>\n  state.find((timebox) => timebox.id === timeboxId);\n","import { TIMEBOX_EDIT_STOP, TIMEBOX_EDIT_START } from \"../constants/types\";\r\n\r\nexport function currentlyEditedTimeboxIdReducer(state = null, action) {\r\n  switch (action.type) {\r\n    case TIMEBOX_EDIT_STOP: {\r\n      return null;\r\n    }\r\n    case TIMEBOX_EDIT_START: {\r\n      const { currentlyEditedTimeboxId } = action;\r\n      return currentlyEditedTimeboxId;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { LOADING_INDICATOR_DISABLE } from \"../constants/types\";\r\n\r\nexport function timeboxesAreLoadingReducer(state = true, action) {\r\n  switch (action.type) {\r\n    case LOADING_INDICATOR_DISABLE: {\r\n      return false;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { ERROR_SET } from \"../constants/types\";\r\n\r\nexport function timeboxesLoadingErrorReducer(state = null, action = {}) {\r\n  switch (action.type) {\r\n    case ERROR_SET: {\r\n      const { timeboxesLoadingError } = action;\r\n      return timeboxesLoadingError;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const getTimeboxesLoadingError = (state) => state;\r\n","import { SET_TIMEBOX_CREATING, CANCEL_TIMEBOX_CREATING } from '../constants/types';\n\nexport function timeboxIsCreatingReducer(state = false, action) {\n  switch (action.type) {\n    case SET_TIMEBOX_CREATING: {\n      return true;\n    }\n    case CANCEL_TIMEBOX_CREATING: {\n      return false;\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { SEARCH_INPUT } from \"../constants/types\";\r\n\r\n// const initialState = {\r\n//   timeboxesSearch: [],\r\n// };\r\n\r\nexport default function timeboxesSearchReducer(state = [], action) {\r\n  switch (action.type) {\r\n    case SEARCH_INPUT: {\r\n      const { payload } = action;\r\n      return payload;\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { currentTimeboxIdReducer } from './currentTimeboxIdReducer';\nimport timeboxesReducer, * as timeboxesSelectors from './timeboxesReducer';\nimport { currentlyEditedTimeboxIdReducer } from './currentlyEditedTimeboxIdReducer';\nimport { timeboxesAreLoadingReducer } from './timeboxesAreLoadingReducer';\nimport { timeboxesLoadingErrorReducer } from './timeboxesLoadingErrorReducer';\nimport { timeboxIsCreatingReducer } from './timeboxIsCreatingReducer';\nimport timeboxesSearchReducer from './timeboxesSearchReducer';\n\nfunction rootReducer(state = {}, action) {\n  return {\n    currentTimeboxId: currentTimeboxIdReducer(state.currentTimeboxId, action),\n    timeboxes: timeboxesReducer(state.timeboxes, action),\n    timeboxIsCreating: timeboxIsCreatingReducer(state.timeboxIsCreating, action),\n    currentlyEditedTimeboxId: currentlyEditedTimeboxIdReducer(\n      state.currentlyEditedTimeboxId,\n      action,\n    ),\n    timeboxesAreLoading: timeboxesAreLoadingReducer(state.timeboxesAreLoading, action),\n    timeboxesLoadingError: timeboxesLoadingErrorReducer(state.timeboxesLoadingError, action),\n    timeboxesSearch: timeboxesSearchReducer(state.timeboxesSearch, action),\n  };\n}\n\n// selectors\nexport const getAllTimeboxes = (state) => timeboxesSelectors.getAllTimeboxes(state.timeboxes);\n\nexport const getRemainingTimeboxes = (state) =>\n  !state.timeboxesSearch\n    ? timeboxesSelectors.getRemainingTimeboxes(state.timeboxes)\n    : state.timeboxes.filter(\n        (timebox) =>\n          timebox.title.toLowerCase().includes(state.timeboxesSearch) && timebox.finished === false,\n      );\nexport const getTimeboxById = (state, timeboxId) =>\n  timeboxesSelectors.getTimeboxById(state.timeboxes, timeboxId);\n\nexport const areTimeboxesLoading = (state) => state.timeboxesAreLoading;\nexport const getTimeboxesLoadingError = (state) => state.timeboxesLoadingError;\nexport const isTimeboxEdited = (state, timebox) =>\n  state.currentlyEditedTimeboxId && state.currentlyEditedTimeboxId === timebox.id;\nexport const getCurrentlyEditedTimebox = (state) =>\n  getTimeboxById(state, state.currentlyEditedTimeboxId);\nexport const isAnyTimeboxEdited = (state) => !!state.currentlyEditedTimeboxId;\nexport const isAnyTimeboxCurrent = (state) => !!state.currentTimeboxId;\nexport const getCurrentTimebox = (state) =>\n  isAnyTimeboxCurrent(state) ? getTimeboxById(state, state.currentTimeboxId) : null;\n\nexport const getFinishedTimeboxes = (state) =>\n  state.timeboxes.filter(\n    (timebox) => timebox.finished === true && timebox.title.includes(state.timeboxesSearch),\n  );\nexport const timeboxIsCreating = (state) => state.timeboxIsCreating;\n\nexport default rootReducer;\n","import React from \"react\";\r\n\r\nconst AuthenticationContext = React.createContext({ accessToken: null });\r\n\r\nexport default AuthenticationContext;","export function wait(ms = 1000) {\r\n    return new Promise((resolve) => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ErrorBoundary extends React.Component {\n  state = {\n    hasError: false,\n  };\n  static getDerivedStateFromError() {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n    console.log('Wystąpił następujący błąd:', error, info);\n  }\n  render() {\n    const { message, children } = this.props;\n    return this.state.hasError ? message : children;\n  }\n}\nErrorBoundary.propTypes = {\n  message: PropTypes.string.isRequired,\n  children: PropTypes.any.isRequired,\n};\n\nexport default ErrorBoundary;\n","import React from 'react';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.emailInput = React.createRef();\n    this.passwordInput = React.createRef();\n  }\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.props.onLoginAttempt({\n      email: this.emailInput.current.value,\n      password: this.passwordInput.current.value,\n    });\n    this.emailInput.current.value = '';\n    this.passwordInput.current.value = '';\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit} className=\"LoginForm\">\n        {this.props.errorMessage ? (\n          <div className=\"LoginForm__error-message\">{this.props.errorMessage}</div>\n        ) : null}\n        <label>\n          Email\n          <input ref={this.emailInput} type=\"text\" defaultValue=\"hubert@example.com\" />\n        </label>\n        <br />\n        <label>\n          Hasło\n          <input ref={this.passwordInput} type=\"password\" defaultValue=\"secret\" />\n        </label>\n        <br />\n        <button className=\"login\">\n          <i className=\"fas fa-sign-in-alt\" />\n        </button>\n      </form>\n    );\n  }\n}\n\nexport default LoginForm;\n","import { wait } from \"./wait\";\r\n\r\nconst FakeAuthenticationAPI = {\r\n    login: async function(credentials) {\r\n        await wait(200);\r\n        const { email, password } = credentials;\r\n        if (email === \"hubert@example.com\" && password === \"secret\") {\r\n            return {\r\n                accessToken: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Imh1YmVydEBleGFtcGxlLmNvbSIsImlhdCI6MTU5MDQwNzI0NiwiZXhwIjoxNTkwNDEwODQ2LCJzdWIiOiIyIn0.rgxTu-UEf2KylenKrTNSQbouGXnEbjhSApw2daYlLTw\"\r\n            }\r\n        }\r\n        throw new Error(\"Invalid credentials\");\r\n    }\r\n}\r\n\r\nexport default FakeAuthenticationAPI;","import React from 'react';\n\nimport ErrorBoundary from './ErrorBoundary';\nimport LoginForm from './LoginForm';\nimport AuthenticationContext from '../contexts/AuthenticationContext';\nimport AuthenticationAPI from '../api/FakeAuthenticationApi';\n\nconst AuthenticatedApp = React.lazy(() => import('./AuthenticatedApp'));\n\nclass App extends React.Component {\n  state = {\n    accessToken: null,\n    previousLoginAttemptFailed: false,\n    expiresIn: 3600000,\n  };\n\n  componentDidMount() {\n    this.getAccessToken();\n    this.intID = setInterval(() => {\n      this.handleLogout();\n    }, this.state.expiresIn);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intID);\n  }\n\n  getAccessToken() {\n    this.setState({\n      accessToken: localStorage.getItem('accessToken'),\n      previousLoginAttemptFailed: false,\n    });\n  }\n\n  handleLoginAttempt = (credentials) => {\n    AuthenticationAPI.login(credentials)\n      .then(({ accessToken }) => {\n        localStorage.setItem('accessToken', accessToken);\n        this.getAccessToken();\n      })\n      .catch(() => {\n        this.setState({\n          accessToken: null,\n          previousLoginAttemptFailed: true,\n        });\n      });\n  };\n\n  handleLogout = () => {\n    this.setState({\n      accessToken: localStorage.removeItem('accessToken'),\n      previousLoginAttemptFailed: false,\n    });\n  };\n\n  isUserLoggedIn() {\n    return !!this.state.accessToken;\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <h2 className=\"title\">Timeboxing</h2>\n        <ErrorBoundary message=\"Coś nie działa w całej aplikacji\">\n          {this.isUserLoggedIn() ? (\n            <AuthenticationContext.Provider value={{ accessToken: this.state.accessToken }}>\n              <React.Suspense fallback=\"... Loading\">\n                <AuthenticatedApp onLogout={this.handleLogout} />\n              </React.Suspense>\n            </AuthenticationContext.Provider>\n          ) : (\n            <LoginForm\n              errorMessage={\n                this.state.previousLoginAttemptFailed ? 'Nie udało się zalogować' : null\n              }\n              onLoginAttempt={this.handleLoginAttempt}\n            />\n          )}\n        </ErrorBoundary>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport thunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport App from \"./components/App\";\r\nimport \"./styles/main.scss\"\r\n\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools(\r\n    applyMiddleware(thunk)\r\n));\r\n\r\nReactDOM.render(\r\n    <Provider store={ store }>\r\n        <App />\r\n    </Provider>, \r\n    document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}